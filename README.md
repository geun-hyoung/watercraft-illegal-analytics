# Watercraft Illegal Analytics

μμƒ λ μ € λ¶λ²• ν™λ™ νƒμ§€ λ° λ¶„μ„ νμ΄ν”„λΌμΈ

## π“‹ ν”„λ΅μ νΈ κ°μ”

μ΄ ν”„λ΅μ νΈλ” μμƒ λ μ € μ„ λ°•μ λ¶λ²• ν™λ™μ„ μλ™μΌλ΅ νƒμ§€ν•κ³  λ¶„μ„ν•λ” μ‹μ¤ν…μ…λ‹λ‹¤. 3κ°€μ§€ μ£Όμ” κ³Όμ—…μ„ μν–‰ν•©λ‹λ‹¤:

1. **λ³΄νΈ μ ν• λ¶„λ¥**: λ³΄νΈλ¥Ό νƒμ§€ν•κ³  μ ν•μ„ λ¶„λ¥ (λ¨ν„°λ³΄νΈ, μμƒμ¤ν† λ°”μ΄, κ³ λ¬΄λ³΄νΈ, μ„ΈμΌλ§μ”νΈ, κΈ°νƒ€)
2. **μΉμ„  μΈμ› μ νƒμ§€**: λ³΄νΈμ— νƒ‘μΉν• μΈμ› μλ¥Ό μλ™μΌλ΅ κ³„μ‚°
3. **λ²νΈν OCR**: μ„ λ°• λ²νΈνμ„ νƒμ§€ν•κ³  ν…μ¤νΈλ¥Ό μ¶”μ¶ν•μ—¬ μ •κ·ν™”

## π“ κ°λ° κ²°κ³Ό ν΄λ” κµ¬μ΅°

μ μ¶ κ²°κ³Όλ¬Όμ€ μ•„λμ™€ κ°™μ€ κµ¬μ΅°λ΅ μ •λ¦¬λμ–΄ μμµλ‹λ‹¤:

```
watercraft-illegal-analytics/
β”β”€β”€ README.md                          # μ—°κµ¬ κ²°κ³Όλ¬Ό μ„¤λ… νμΌ (λ°μ΄ν„° λ° λ¨λΈ, ν•™μµ/μ¶”λ΅  μν–‰λ°©λ²•, μ‹¤ν–‰ν™κ²½ λ“±)
β”β”€β”€ requirements.txt                   # ν•„μ λΌμ΄λΈλ¬λ¦¬ μƒμ„Έ λ²„μ „ λ©λ΅
β”‚
β”β”€β”€ data/                              # λ¨λΈμ ν•™μµ λ° ν‰κ°€μ— μ‚¬μ©λ λ°μ΄ν„°
β”‚   β”β”€β”€ raw/                          # μ›λ³Έ λ°μ΄ν„°
β”‚   β”‚   β”β”€β”€ classification/           # λ³΄νΈ μ ν• λ¶„λ¥ λ°μ΄ν„° (μ΄λ―Έμ§€ λ° λΌλ²¨)
β”‚   β”‚   β””β”€β”€ plate_detection/          # λ²νΈν νƒμ§€ λ°μ΄ν„° (μ΄λ―Έμ§€ λ° λΌλ²¨)
β”‚   β””β”€β”€ test/                         # ν…μ¤νΈ μ΄λ―Έμ§€ (κ³µν†µ)
β”‚
β”β”€β”€ model/                             # ν•™μµλ λ¨λΈ νμΌλ“¤
β”‚   β”β”€β”€ boat_classification_baseline.pt
β”‚   β”β”€β”€ plate_detection_baseline.pt
β”‚   β””β”€β”€ yolo11s_passenger_counting.pt
β”‚
β”β”€β”€ src/                               # λ°μ΄ν„° μ •μ /μ „μ²λ¦¬, λ¨λΈ κµ¬μ΅°, λ¨λΈμ ν•™μµκ³Ό ν‰κ°€λ¥Ό μν–‰ν•λ” μ†μ¤μ½”λ“ νμΌλ“¤ (.py)
β”‚   β”β”€β”€ boat_classification_train.py      # λ³΄νΈ μ ν• λ¶„λ¥ λ¨λΈ ν•™μµ
β”‚   β”β”€β”€ boat_classification_inference.py  # λ³΄νΈ μ ν• λ¶„λ¥ μ¶”λ΅ 
β”‚   β”β”€β”€ passenger_counting.py             # μΉμ„  μΈμ› μ νƒμ§€
β”‚   β”β”€β”€ plate_detection_train.py          # λ²νΈν νƒμ§€ λ¨λΈ ν•™μµ
β”‚   β””β”€β”€ plate_ocr_inference.py            # λ²νΈν OCR μ¶”μ¶
β”‚
β”β”€β”€ notebooks/                         # λ°μ΄ν„° μ •μ /μ „μ²λ¦¬, λ¨λΈ κµ¬μ΅°, λ¨λΈμ ν•™μµκ³Ό ν‰κ°€λ¥Ό μν–‰ν•λ” notebook νμΌλ“¤ (.ipynb)
β”‚   β””β”€β”€ inference.ipynb               # ν†µν•© μ¶”λ΅  λ…ΈνΈλ¶ (3κ°€μ§€ κ³Όμ—… μν–‰)
β”‚
β””β”€β”€ result/                            # μ¶”λ΅  κ²°κ³Ό (μ‹¤ν–‰ ν›„ μƒμ„±λ¨)
    β”β”€β”€ boat_classification/           # λ³΄νΈ μ ν• λ¶„λ¥ λ° μΉμ„  μΈμ› μ νƒμ§€ ν†µν•© κ²°κ³Ό
    β””β”€β”€ plate_ocr/                     # λ²νΈν OCR κ²°κ³Ό
```

## π€ μ£Όμ” κΈ°λ¥

### 1. λ³΄νΈ μ ν• λ¶„λ¥

**ν•™μµ:**
```bash
python src/boat_classification_train.py
```
- μ…λ ¥: `data/raw/classification/images/`, `data/raw/classification/labels/`
- μ¶λ ¥: `model/boat_classification_baseline.pt`

**μ¶”λ΅ :**
```bash
python src/boat_classification_inference.py
```
- μ…λ ¥: `data/test/` ν΄λ”μ μ΄λ―Έμ§€ νμΌλ“¤
- μ¶λ ¥: `result/boat_classification/` (CSV + μ‹κ°ν™” μ΄λ―Έμ§€)

### 2. μΉμ„  μΈμ› μ νƒμ§€

```bash
python src/passenger_counting.py
```
- μ…λ ¥: `result/boat_classification/*_result.jpg` (λ³΄νΈ μ ν• λ¶„λ¥ κ²°κ³Ό μ΄λ―Έμ§€)
- μ¶λ ¥: `result/passenger_counting/` (μ‹κ°ν™” μ΄λ―Έμ§€)

### 3. λ²νΈν νƒμ§€ λ° OCR

**ν•™μµ:**
```bash
python src/plate_detection_train.py
```
- μ…λ ¥: `data/raw/plate_detection/images/`, `data/raw/plate_detection/labels/`
- μ¶λ ¥: `model/plate_detection_baseline.pt`

**OCR μ¶”λ΅ :**
```bash
python src/plate_ocr_inference.py
```
- μ…λ ¥: `data/test/` ν΄λ”μ μ΄λ―Έμ§€ νμΌλ“¤
- μ¶λ ¥: `result/plate_ocr/` (CSV + ν¬λ΅­ μ΄λ―Έμ§€ + μ¤λ²„λ μ΄ μ΄λ―Έμ§€)

## π’» λ¨λΈ μ‹¤ν–‰ ν™κ²½ (HW/SW)

### ν•λ“μ›¨μ–΄ μ”κµ¬μ‚¬ν•­
- **GPU**: NVIDIA GPU (CUDA μ§€μ›)
- **NVIDIA Driver**: 576.88 μ΄μƒ (ν…μ¤νΈ ν™κ²½)
- **λ©”λ¨λ¦¬**: μµμ† 8GB RAM κ¶μ¥

### μ†ν”„νΈμ›¨μ–΄ ν™κ²½
- **OS**: Windows 10/11, Linux, macOS
- **Python**: 3.8 μ΄μƒ
- **CUDA**: 12.8 (PyTorch 2.9.1+cu128 μ‚¬μ©)
- **PyTorch**: 2.9.1+cu128

### ν™κ²½ κµ¬μ„± λ°©λ²•

#### λ°©λ²• 1: pip κ°€μƒ ν™κ²½ μ‚¬μ© (κ¶μ¥)

1. **μ €μ¥μ† ν΄λ΅ **
```bash
git clone https://github.com/geun-hyoung/watercraft-illegal-analytics.git
cd watercraft-illegal-analytics
```

2. **κ°€μƒ ν™κ²½ μƒμ„± λ° ν™μ„±ν™”**
```bash
# Windows
python -m venv venv
venv\Scripts\activate

# Linux/Mac
python -m venv venv
source venv/bin/activate
```

3. **ν¨ν‚¤μ§€ μ„¤μΉ**
```bash
pip install -r requirements.txt
```

#### λ°©λ²• 2: conda ν™κ²½ μ‚¬μ©

1. **conda ν™κ²½ μƒμ„± (yaml νμΌ μ‚¬μ©)**
```bash
conda env create -f environment.yml
conda activate watercraft
```

λλ” μλ™μΌλ΅ μ„¤μΉ:
```bash
conda create -n watercraft python=3.10
conda activate watercraft
conda install pytorch torchvision torchaudio pytorch-cuda=12.8 -c pytorch -c nvidia
pip install -r requirements.txt
```

**conda ν™κ²½ κµ¬μ„± νμΌ (`environment.yml`):**
- Python 3.10
- PyTorch 2.9.1 (CUDA 12.8)
- λ¨λ“  ν•„μ λΌμ΄λΈλ¬λ¦¬ λ° μƒμ„Έ λ²„μ „ ν¬ν•¨
- ν”„λ΅μ νΈ λ£¨νΈμ `environment.yml` νμΌ μ°Έμ΅°

### ν•„μ λΌμ΄λΈλ¬λ¦¬ μƒμ„Έ λ²„μ „

**ν•„μ λΌμ΄λΈλ¬λ¦¬μ μƒμ„Έ λ²„μ „μ€ `requirements.txt` νμΌμ— λ…μ‹λμ–΄ μμµλ‹λ‹¤.** (`pip freeze > requirements.txt` ν•μ‹μΌλ΅ μƒμ„±λ¨)

**μ£Όμ” λΌμ΄λΈλ¬λ¦¬ λ²„μ „:**
- **torch**: 2.9.1+cu128
- **torchvision**: 0.24.1+cu128
- **ultralytics**: 8.3.239
- **easyocr**: 1.7.2
- **opencv-python**: 4.12.0.88
- **pandas**: 2.3.3
- **numpy**: 2.2.6
- **pillow**: 11.3.0
- **matplotlib**: 3.10.8
- **scikit-image**: 0.25.2
- **scipy**: 1.16.3

**μ „μ²΄ ν¨ν‚¤μ§€ λ©λ΅:**
ν„μ¬ ν”„λ΅μ νΈμ `requirements.txt` νμΌμ—λ” **λ¨λ“  μμ΅΄μ„± ν¨ν‚¤μ§€μ μƒμ„Έ λ²„μ „(μ΄ 49κ° ν¨ν‚¤μ§€)**μ΄ ν¬ν•¨λμ–΄ μμµλ‹λ‹¤. 
ν”„λ΅μ νΈ λ£¨νΈμ `requirements.txt` νμΌμ„ μ°Έμ΅°ν•μ‹κΈ° λ°”λλ‹λ‹¤.

**requirements.txt μƒμ„± λ°©λ²•:**
```bash
pip freeze > requirements.txt
```

## π“ ν•™μµ/ν‰κ°€λ¥Ό μ„ν• μ£Όν”Όν„° λ…ΈνΈλ¶

### ν†µν•© μ¶”λ΅  μ‹¤ν–‰ (ν‰κ°€/μ¶”λ΅ )

λ¨λ“  κ³Όμ—…μ„ ν• λ²μ— μ‹¤ν–‰ν•λ ¤λ©΄ Jupyter λ…ΈνΈλ¶μ„ μ‚¬μ©ν•μ„Έμ”:

```bash
jupyter notebook notebooks/inference.ipynb
```

**λ…ΈνΈλ¶ μ‹¤ν–‰ μμ„:**
1. **λ³΄νΈ μ ν• λ¶„λ¥** β†’ `result/boat_classification/` (λ³΄νΈ λ°”μ΄λ”© λ°•μ¤ + μ ν• λΌλ²¨)
2. **μΉμ„  μΈμ› μ νƒμ§€** β†’ `result/boat_classification/` (λ³΄νΈ μ ν• λ¶„λ¥ κ²°κ³Όμ— μ‚¬λ λ°”μ΄λ”© λ°•μ¤ + νƒ‘μΉ μΈμ› μ μ¶”κ°€ν•μ—¬ λ®μ–΄μ“°κΈ°)
3. **λ²νΈν OCR** β†’ `result/plate_ocr/` (λ³„λ„λ΅ λ…λ¦½ μ‹¤ν–‰)
4. **κ²°κ³Ό μ‹κ°ν™” λ° μƒν” ν™•μΈ**

**λ…ΈνΈλ¶ μ£Όμ” λ‚΄μ©:**
- κ° μ…€μ— μƒμ„Έν• μ£Όμ„κ³Ό μ„¤λ…μ΄ ν¬ν•¨λμ–΄ μμµλ‹λ‹¤
- μ‹¤ν–‰ μμ„μ™€ κ° λ‹¨κ³„μ λ©μ μ΄ λ…ν™•ν μ„¤λ…λμ–΄ μμµλ‹λ‹¤
- κ²°κ³Ό μ €μ¥ μ„μΉ λ° ν•μ‹μ΄ λ…μ‹λμ–΄ μμµλ‹λ‹¤
- μ—λ¬ λ°μƒ μ‹ ν™•μΈν•  μ μλ” μ²΄ν¬λ¦¬μ¤νΈκ°€ ν¬ν•¨λμ–΄ μμµλ‹λ‹¤

**μ£Όμμ‚¬ν•­:**
- λ…ΈνΈλ¶ μ‹¤ν–‰ μ „μ— `data/test/` ν΄λ”μ— ν…μ¤νΈ μ΄λ―Έμ§€κ°€ μ¤€λΉ„λμ–΄ μμ–΄μ•Ό ν•©λ‹λ‹¤
- ν•™μµλ λ¨λΈ νμΌ(`model/*.pt`)μ΄ μ΅΄μ¬ν•΄μ•Ό ν•©λ‹λ‹¤
- GPU μ‚¬μ© μ‹ CUDA ν™κ²½μ΄ μ¬λ°”λ¥΄κ² μ„¤μ •λμ–΄ μμ–΄μ•Ό ν•©λ‹λ‹¤

### κ°λ³„ ν•™μµ μ‹¤ν–‰

κ° λ¨λΈμ ν•™μµμ€ Python μ¤ν¬λ¦½νΈλ΅ μ‹¤ν–‰ν•  μ μμµλ‹λ‹¤:

**λ³΄νΈ μ ν• λ¶„λ¥ λ¨λΈ ν•™μµ:**
```bash
python src/boat_classification_train.py
```

**λ²νΈν νƒμ§€ λ¨λΈ ν•™μµ:**
```bash
python src/plate_detection_train.py
```

ν•™μµ μ¤ν¬λ¦½νΈμ—λ„ μƒμ„Έν• μ£Όμ„μ΄ ν¬ν•¨λμ–΄ μμΌλ©°, λ°μ΄ν„° κ²½λ΅, ν•μ΄νΌνλΌλ―Έν„°, μ €μ¥ μ„μΉ λ“±μ΄ λ…μ‹λμ–΄ μμµλ‹λ‹¤.

## π”§ μ£Όμ” μμ΅΄μ„±

- **ultralytics**: YOLO λ¨λΈ ν•™μµ λ° μ¶”λ΅ 
- **easyocr**: OCR ν…μ¤νΈ μ¶”μ¶
- **opencv-python**: μ΄λ―Έμ§€ μ²λ¦¬
- **torch**: λ”¥λ¬λ‹ ν”„λ μ„μ›ν¬
- **pandas**: λ°μ΄ν„° μ²λ¦¬
- **numpy**: μμΉ μ—°μ‚°
- **Pillow**: μ΄λ―Έμ§€ μ²λ¦¬ (ν•κΈ€ ν‘μ‹)

μ „μ²΄ ν¨ν‚¤μ§€ λ©λ΅μ€ `requirements.txt`λ¥Ό μ°Έμ΅°ν•μ„Έμ”.

## π“ μ €μ‘κ¶ λ° λΌμ΄μ„ μ¤ κ²€ν† 

λ³Έ ν”„λ΅μ νΈμ—μ„ μ‚¬μ©λ λ¨λ“  μ¤ν”μ†μ¤ λΌμ΄λΈλ¬λ¦¬μ μ €μ‘κ¶ λ° λΌμ΄μ„ μ¤λ¥Ό κ²€ν† ν• κ²°κ³Ό, μ—°κµ¬ λ° ν•™μµ λ©μ μ μ‚¬μ©μ— λ¬Έμ κ°€ μ—†μμ„ ν™•μΈν–μµλ‹λ‹¤.

### μ£Όμ” λΌμ΄λΈλ¬λ¦¬ λΌμ΄μ„ μ¤ μ •λ³΄

- **PyTorch (torch, torchvision)**: BSD-style License
  - μƒμ—…μ  μ‚¬μ© κ°€λ¥, μ—°κµ¬ λ©μ  μ‚¬μ© κ°€λ¥
  
- **Ultralytics YOLO**: AGPL-3.0 License
  - μ¤ν”μ†μ¤ ν”„λ΅μ νΈ λ° μ—°κµ¬ λ©μ  μ‚¬μ© κ°€λ¥
  
- **EasyOCR**: Apache License 2.0
  - μƒμ—…μ  μ‚¬μ© κ°€λ¥, μ—°κµ¬ λ©μ  μ‚¬μ© κ°€λ¥
  
- **OpenCV (opencv-python)**: Apache License 2.0
  - μƒμ—…μ  μ‚¬μ© κ°€λ¥, μ—°κµ¬ λ©μ  μ‚¬μ© κ°€λ¥
  
- **Pandas**: BSD 3-Clause License
  - μƒμ—…μ  μ‚¬μ© κ°€λ¥, μ—°κµ¬ λ©μ  μ‚¬μ© κ°€λ¥
  
- **NumPy**: BSD License
  - μƒμ—…μ  μ‚¬μ© κ°€λ¥, μ—°κµ¬ λ©μ  μ‚¬μ© κ°€λ¥
  
- **Matplotlib**: PSF-based License
  - μƒμ—…μ  μ‚¬μ© κ°€λ¥, μ—°κµ¬ λ©μ  μ‚¬μ© κ°€λ¥
  
- **scikit-image, scipy**: BSD License
  - μƒμ—…μ  μ‚¬μ© κ°€λ¥, μ—°κµ¬ λ©μ  μ‚¬μ© κ°€λ¥

### μ €μ‘κ¶ κ²€ν†  κ²°κ³Ό

β… **κ²€ν†  μ™„λ£**: λ³Έ ν”„λ΅μ νΈμ—μ„ μ‚¬μ©λ λ¨λ“  μ¤ν”μ†μ¤ λΌμ΄λΈλ¬λ¦¬λ” μ—°κµ¬ λ° ν•™μµ λ©μ μ μ‚¬μ©μ— μ ν•©ν• λΌμ΄μ„ μ¤λ¥Ό λ³΄μ ν•κ³  μμΌλ©°, μ €μ‘κ¶ λ¬Έμ κ°€ μ—†μμ„ ν™•μΈν–μµλ‹λ‹¤.

- λ¨λ“  μ£Όμ” λΌμ΄λΈλ¬λ¦¬λ” μ¤ν”μ†μ¤ λΌμ΄μ„ μ¤(BSD, Apache 2.0, AGPL-3.0 λ“±)λ¥Ό λ”°λ¦…λ‹λ‹¤
- μ—°κµ¬ λ° ν•™μµ λ©μ μ μ‚¬μ©μ€ κ° λΌμ΄λΈλ¬λ¦¬μ λΌμ΄μ„ μ¤ μ΅°κ±΄μ— λ¶€ν•©ν•©λ‹λ‹¤
- μƒμ—…μ  μ‚¬μ©μ„ κ³ λ ¤ν•λ” κ²½μ°, κ° λΌμ΄λΈλ¬λ¦¬μ λΌμ΄μ„ μ¤ μ΅°κ±΄μ„ κ°λ³„μ μΌλ΅ ν™•μΈν•μ‹κΈ° λ°”λλ‹λ‹¤

### μ°Έκ³  μ‚¬ν•­

- κ° λΌμ΄λΈλ¬λ¦¬μ μƒμ„Έν• λΌμ΄μ„ μ¤ μ •λ³΄λ” ν•΄λ‹Ή λΌμ΄λΈλ¬λ¦¬μ κ³µμ‹ λ¬Έμ„ λ° GitHub μ €μ¥μ†μ—μ„ ν™•μΈν•  μ μμµλ‹λ‹¤
- λ³Έ ν”„λ΅μ νΈλ” μ—°κµ¬ λ° ν•™μµ λ©μ μΌλ΅ κ°λ°λμ—μΌλ©°, μƒμ—…μ  μ‚¬μ© μ‹μ—λ” κ° λΌμ΄λΈλ¬λ¦¬μ λΌμ΄μ„ μ¤ μ΅°κ±΄μ„ μ¤€μν•΄μ•Ό ν•©λ‹λ‹¤

## π“ κ²°κ³Ό ν•μ‹

### λ³΄νΈ μ ν• λ¶„λ¥
- `classification_results.csv`: μ΄λ―Έμ§€λ³„ λ³΄νΈ νƒμ§€ λ° λ¶„λ¥ κ²°κ³Ό
- `*_result.jpg`: λ°”μ΄λ”© λ°•μ¤μ™€ ν΄λμ¤λ…μ΄ ν‘μ‹λ μ‹κ°ν™” μ΄λ―Έμ§€

### μΉμ„  μΈμ› νƒμ§€
- κ° μ΄λ―Έμ§€μ— λ³΄νΈλ³„ νƒ‘μΉ μΈμ› μκ°€ μ‹κ°ν™”λ μ΄λ―Έμ§€

### λ²νΈν OCR
- `ocr_results.csv`: μ΄λ―Έμ§€λ³„ λ²νΈν ν…μ¤νΈ μ¶”μ¶ κ²°κ³Ό
- `crops/`: νƒμ§€λ λ²νΈν μμ—­ ν¬λ΅­ μ΄λ―Έμ§€
- `overlay/`: μ›λ³Έ μ΄λ―Έμ§€μ— νƒμ§€ κ²°κ³Όλ¥Ό μ¤λ²„λ μ΄ν• μ‹κ°ν™” μ΄λ―Έμ§€

## π”’ Git μ μ™Έ ν•­λ©

λ‹¤μ ν΄λ”/νμΌμ€ Gitμ— μ¶”μ λμ§€ μ•μµλ‹λ‹¤:
- `data/`: λ°μ΄ν„° νμΌ
- `model/`: ν•™μµλ λ¨λΈ νμΌ
- `result/`: μ¶”λ΅  κ²°κ³Ό
- `runs/`: ν•™μµ μ‹¤ν–‰ κ²°κ³Ό
- `venv/`: κ°€μƒ ν™κ²½
- `__pycache__/`: Python μΊμ‹ νμΌ
